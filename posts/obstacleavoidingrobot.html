<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Carlo Meroni website">

    <title>Carlo Meroni website</title>

    <!-- Bootstrap Core CSS -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">
	
	<!-- Font-awesome for icons -->
	<link rel="stylesheet" href="/css/font-awesome.min.css">
    
	<!-- overflow theme -->
	<link href="/css/overflow.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
    
	<!-- jQuery -->
    <script src="/js/jquery.js"></script>
	
    <!-- Bootstrap Core JavaScript -->
    <script src="/js/bootstrap.min.js"></script>
	
	<!-- Load head of the page -->
	<script> $(function(){ $("#page-head").load("/head.html"); }); </script> 
	
	<!-- highlight.js -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/7.3/highlight.min.js"></script>
    <link href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/7.3/styles/dark.min.css" rel="stylesheet" />
    <script>hljs.initHighlightingOnLoad();</script>

	<!-- MathJax for inline math -->
	<script type="text/x-mathjax-config">
	MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
	</script>
	<script type="text/javascript" async
	src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML">
	</script>
</head>

<body>
	<div class="pagecolumn">
	
	<!-- maincolumn -->
	<div id="page-head"></div>

	<!-- posts -->
	
	<h1>An autonomous robot that learns to avoid obstacles</h1>
	<p>A simple robot that I made that can learn to avoid obstacles by its own.</p>
	<small>Published on 29 May 2016</small>
	<hr>
	<h2>Introduction</h2>
	<center>
	<img src="obstacleavoidingrobot/robot.jpg" style="width:45%; margin-right: 4%;"></img>
	<img src="obstacleavoidingrobot/wiring.jpg" style="width:43%"></img>
	</center>
	<p>
	This is a small robot that I made in my spare time, it's a simple robot with two wheels
	controlled by an Arduino microcontroller and its also equipped with an ultrasonic sensor 
	to calculate the distance of the objects that are in front of the robot.
	<br>
	The goal of the agent is simple: move around and avoid obstacles.
	<br>
	To make things more interesting I didn't hard coded a program so that the robot avoids obstacles, instead I
	decided to use a machine learning algorithm to allow the robot to learn how to achieve its goal
	by its own.
	<br>
	In this post I will explain how I built it and how the machine learning algorithm works.
	</p>
	<h2>The hardware</h2>
	<p>
	The components that I decided to use for building the robot are:
	</p>
	<ul>
	<li> Arudino Uno
	<li> Arduino motor shield
	<li> Ultrasonic sensor
	<li> 6 Volt battery
	<li> Robot chassis with wheels
	<li> Switch ON/OFF button
	</ul>
	<p>
	Everything is controlled by the Arduino Uno microcontroller, unfortunately I discovered that
	there is no easy way to control the DC motors speed without an arduino motor shield.
	The arduino motor shield is stacked on top of arduino, the power supply is connected on
	the right side of the shield, the two DC motors are connected to the bottom and the
	ultrasonic sensor on the left side and right side (+M, GND).
	Arduino require a 5 Volt power supply, I used a 6 Volt battery (four 1.5V battery in parallel) so there is
	a little bit of overvoltage but it didn't cause any problem yet (if you want to build this
	robot I recommend to use a 5 Volt battery because the overvoltage can damage the components in
	the long run).
	</p>
	<h2>The software</h2>
	<p>
	I programmed the arudino microcontroller in C with the Arudino IDE provided by the official website.
	To create a learning agent I used a reinforcement learning algorithm called Qlearning.
	Reinforcement learning is a type of learning used also by the human brain that consists in
	trying to learn by trial and error witch actions <i>'A'</i> in a particular state or context <i>'S'</i> 
	will allow the agent to achieve its goal in the best way.
	The goal of my robot is to move around and stay away from objects, I defined this goal as
	a function that may look strange at first but actually its simple:
	</p>
<pre><code class="C">float evaluate(int action, int distance) {
    float reward = 0;
    if (action == 0) reward = distance * 2; //Move straight
    else if (action == 3) reward = distance <= 1 ? 5 : 0; //Move backward
    else reward = distance; //Turn right or left
    return reward;
}
</pre></code>
	<p>
	The reward is a value that tells the robot if its doing a good job, the higher it is the better.
	When the robot is moving forward the reward is equal to the double distance of the object in front
	of it, when the robot is moving backward the reward is high only if the agent is very close to
	an object and in the case that the agent is turning left or right the reward is equal to the
	distance. The Qlearning algorithm tries to find the best actions for each state that will
	maximize the reward.
	<br>
	<a href="https://github.com/Flowx08/ObstacleAvoidingRobot">Here</a> you can find the C full code of this project.
	</p>
	<h2>Results</h2>
	<p>
	I've done a video where you can see the autonomous robot learning to avoid obstacles.
	At first the robot doesn't know anything, for this reason it often crash into objects.
	Subsequently, the agent begins to understand how to avoid objects.
	To make the learning process faster sometimes I move the agent manually to avoid that it
	might remains stuck in a corner.
	</p>
	<center>
	<iframe width="800" height="450" src="https://www.youtube.com" frameborder="0" allowfullscreen></iframe>
	</center>
</div>

</body>

</html>
